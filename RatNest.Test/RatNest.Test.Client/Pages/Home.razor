@page "/"

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

Welcome to your new app.

<div class="d-flex flex-row gap-2 mt-3">
    <div>

        <InputCheckbox Value="@leftArea.IsVisible"
            ValueExpression="@(() => leftArea.IsVisible)"
            ValueChanged="@leftArea.SetIsVisible" />

        <TextBoxView Field="@leftField" />

    </div>
    <div>

        <InputCheckbox Value="@rightArea.IsVisible"
            ValueExpression="@(() => rightArea.IsVisible)"
            ValueChanged="@rightArea.SetIsVisible" />

        <TextBoxView Field="@rightField" />

    </div>
</div>

@code {
    private FormRegion topLevel, leftArea, rightArea;
    private TextBoxField leftField, rightField;

    protected override void OnInitialized()
    {
        base.OnInitialized();

        topLevel = new(null, topLevel: true);
        leftArea = new(topLevel);
        rightArea = new(topLevel);

        leftField = new(leftArea);
        rightField = new(rightArea);
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);

        if (firstRender)
        {
            await topLevel.Initialize();
        }
    }
}